apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "chart.fullname" . }}-html
  labels:
    {{- include "chart.labels" . | nindent 4 }}
data:
  index.html: |
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ .Values.pageTitle | default "AWS EKS Fargate Architecture" }}</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            
            body {
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
                min-height: 100vh;
                color: white;
                overflow-x: auto;
            }
            
            .header {
                text-align: center;
                padding: 2rem 1rem;
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .main-title {
                font-size: 2.5rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
                background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .subtitle {
                font-size: 1.1rem;
                opacity: 0.8;
                margin-bottom: 1rem;
            }
            
            .architect-badge {
                display: inline-block;
                background: rgba(69, 183, 209, 0.2);
                color: #45b7d1;
                padding: 0.3rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                border: 1px solid rgba(69, 183, 209, 0.3);
            }
            
            .container {
                max-width: 1400px;
                margin: 2rem auto;
                padding: 0 1rem;
            }
            
            .diagram-container {
                background: rgba(255, 255, 255, 0.05);
                border-radius: 20px;
                padding: 2rem;
                margin-bottom: 2rem;
                border: 1px solid rgba(255, 255, 255, 0.1);
                overflow-x: auto;
            }
            
            .diagram-title {
                text-align: center;
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 2rem;
                color: #4ecdc4;
            }
            
            .architecture-diagram {
                display: flex;
                flex-direction: column;
                gap: 2rem;
                min-width: 800px;
                align-items: center;
            }
            
            .tier {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
                position: relative;
            }
            
            .tier-label {
                background: linear-gradient(45deg, #667eea, #764ba2);
                padding: 0.5rem 1.5rem;
                border-radius: 25px;
                font-weight: 600;
                margin-bottom: 1rem;
                text-align: center;
                min-width: 200px;
            }
            
            .tier-content {
                display: flex;
                justify-content: center;
                gap: 1rem;
                flex-wrap: wrap;
                width: 100%;
            }
            
            .service-box {
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid;
                border-radius: 12px;
                padding: 1rem;
                min-width: 140px;
                text-align: center;
                transition: all 0.3s ease;
                cursor: pointer;
                position: relative;
            }
            
            .service-box:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            }
            
            .aws-service { border-color: #ff9900; }
            .k8s-service { border-color: #326ce5; }
            .app-service { border-color: #4ecdc4; }
            .data-service { border-color: #ff6b6b; }
            .network-service { border-color: #45b7d1; }
            
            .service-icon {
                font-size: 2rem;
                margin-bottom: 0.5rem;
                display: block;
            }
            
            .service-name {
                font-weight: 600;
                font-size: 0.9rem;
                margin-bottom: 0.3rem;
            }
            
            .service-desc {
                font-size: 0.75rem;
                opacity: 0.7;
                line-height: 1.3;
            }
            
            .connection-line {
                height: 30px;
                width: 2px;
                background: linear-gradient(to bottom, transparent, #45b7d1, transparent);
                margin: 0 auto;
            }
            
            .tech-stack-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 1rem;
                margin-top: 2rem;
            }
            
            .tech-category {
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
                padding: 1.5rem;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .tech-category h3 {
                color: #4ecdc4;
                margin-bottom: 1rem;
                font-size: 1.1rem;
            }
            
            .tech-list {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .tech-tag {
                background: rgba(255, 255, 255, 0.1);
                padding: 0.3rem 0.8rem;
                border-radius: 15px;
                font-size: 0.8rem;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-top: 2rem;
            }
            
            .stat-card {
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
                padding: 1.5rem;
                text-align: center;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .stat-number {
                font-size: 2rem;
                font-weight: 700;
                color: #4ecdc4;
                display: block;
            }
            
            .stat-label {
                font-size: 0.9rem;
                opacity: 0.8;
                margin-top: 0.5rem;
            }
            
            .contact-section {
                margin-top: 3rem;
                padding: 2rem;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.1);
                text-align: center;
            }
            
            .contact-title {
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: #4ecdc4;
            }
            
            .contact-links {
                display: flex;
                justify-content: center;
                gap: 2rem;
                flex-wrap: wrap;
            }
            
            .contact-link {
                display: flex;
                align-items: center;
                gap: 0.8rem;
                background: rgba(255, 255, 255, 0.1);
                padding: 1rem 1.5rem;
                border-radius: 12px;
                text-decoration: none;
                color: white;
                transition: all 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.2);
                min-width: 200px;
            }
            
            .contact-link:hover {
                background: rgba(255, 255, 255, 0.15);
                transform: translateY(-3px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                color: white;
            }
            
            .contact-icon {
                font-size: 1.5rem;
                flex-shrink: 0;
            }
            
            .contact-info h4 {
                font-size: 1rem;
                margin-bottom: 0.2rem;
                color: #4ecdc4;
            }
            
            .contact-info p {
                font-size: 0.8rem;
                opacity: 0.7;
            }
            
            .footer-note {
                margin-top: 2rem;
                padding: 1rem;
                background: rgba(0, 0, 0, 0.2);
                border-radius: 10px;
                font-size: 0.9rem;
                opacity: 0.8;
                border-left: 3px solid #4ecdc4;
            }
            
            @media (max-width: 768px) {
                .main-title { font-size: 2rem; }
                .architecture-diagram { min-width: 600px; }
                .tier-content { justify-content: center; }
                .service-box { min-width: 120px; font-size: 0.8rem; }
                .contact-links { gap: 1rem; }
                .contact-link { min-width: 180px; padding: 0.8rem 1rem; }
            }
        </style>
    </head>
    <body>
        <div class="header">
            <h1 class="main-title">{{ .Values.message | default "By Rnato35" }}</h1>
            <p class="subtitle">AWS EKS Fargate Cloud-Native Architecture</p>
            <span class="architect-badge">DevOps Engineer Portfolio</span>
        </div>
        
        <div class="container">
            <div class="diagram-container">
                <h2 class="diagram-title">Infrastructure Architecture Diagram</h2>
                
                <div class="architecture-diagram">
                    <!-- Internet/Users Tier -->
                    <div class="tier">
                        <div class="tier-label">🌐 Internet / Users</div>
                        <div class="tier-content">
                            <div class="service-box network-service">
                                <span class="service-icon">👥</span>
                                <div class="service-name">End Users</div>
                                <div class="service-desc">Technical Interviewers<br>Web Traffic</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="connection-line"></div>
                    
                    <!-- Networking Tier -->
                    <div class="tier">
                        <div class="tier-label">🌐 Networking Layer (Public)</div>
                        <div class="tier-content">
                            <div class="service-box aws-service">
                                <span class="service-icon">⚖️</span>
                                <div class="service-name">ALB</div>
                                <div class="service-desc">Application<br>Load Balancer</div>
                            </div>
                            <div class="service-box network-service">
                                <span class="service-icon">🌍</span>
                                <div class="service-name">Internet Gateway</div>
                                <div class="service-desc">Public Internet<br>Access Point</div>
                            </div>
                            <div class="service-box network-service">
                                <span class="service-icon">🔀</span>
                                <div class="service-name">NAT Gateway</div>
                                <div class="service-desc">Outbound Internet<br>for Private Subnets</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="connection-line"></div>
                    
                    <!-- EKS Container Platform -->
                    <div class="tier">
                        <div class="tier-label">🚀 EKS Container Platform (Private)</div>
                        <div class="tier-content">
                            <div class="service-box aws-service">
                                <span class="service-icon">🚀</span>
                                <div class="service-name">EKS Cluster</div>
                                <div class="service-desc">Managed Kubernetes<br>{{ .Values.clusterName | default "one-click-eks" }}</div>
                            </div>
                            <div class="service-box aws-service">
                                <span class="service-icon">📦</span>
                                <div class="service-name">Fargate</div>
                                <div class="service-desc">Serverless<br>Container Runtime</div>
                            </div>
                            <div class="service-box k8s-service">
                                <span class="service-icon">🎯</span>
                                <div class="service-name">Ingress Controller</div>
                                <div class="service-desc">AWS Load Balancer<br>Controller</div>
                            </div>
                            <div class="service-box app-service">
                                <span class="service-icon">🌐</span>
                                <div class="service-name">Nginx App</div>
                                <div class="service-desc">This Website<br>Helm Deployed</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="connection-line"></div>
                    
                    <!-- Security & Storage -->
                    <div class="tier">
                        <div class="tier-label">🔐 Security & Storage Layer</div>
                        <div class="tier-content">
                            <div class="service-box aws-service">
                                <span class="service-icon">💽</span>
                                <div class="service-name">EBS Volumes</div>
                                <div class="service-desc">Persistent Storage<br>for Pods</div>
                            </div>
                            <div class="service-box aws-service">
                                <span class="service-icon">🔐</span>
                                <div class="service-name">KMS</div>
                                <div class="service-desc">Encryption<br>Key Management</div>
                            </div>
                            <div class="service-box aws-service">
                                <span class="service-icon">👤</span>
                                <div class="service-name">IAM Roles</div>
                                <div class="service-desc">RBAC & Service<br>Account Auth</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tech-stack-grid">
                <div class="tech-category">
                    <h3>Infrastructure as Code</h3>
                    <div class="tech-list">
                        <span class="tech-tag">Terraform</span>
                        <span class="tech-tag">Modular Design</span>
                        <span class="tech-tag">Multi-Environment</span>
                    </div>
                </div>
                
                <div class="tech-category">
                    <h3>Container Orchestration</h3>
                    <div class="tech-list">
                        <span class="tech-tag">Kubernetes</span>
                        <span class="tech-tag">Helm Charts</span>
                        <span class="tech-tag">Fargate</span>
                    </div>
                </div>
                
                <div class="tech-category">
                    <h3>Security & RBAC</h3>
                    <div class="tech-list">
                        <span class="tech-tag">IAM Roles</span>
                        <span class="tech-tag">K8s RBAC</span>
                        <span class="tech-tag">Network Security</span>
                    </div>
                </div>
                
                <div class="tech-category">
                    <h3>Networking</h3>
                    <div class="tech-list">
                        <span class="tech-tag">VPC</span>
                        <span class="tech-tag">Multi-AZ</span>
                        <span class="tech-tag">Private Subnets</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">3</span>
                    <div class="stat-label">Architecture Layers</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">2</span>
                    <div class="stat-label">Availability Zones</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">4</span>
                    <div class="stat-label">Subnet Types</div>
                </div>
                <div class="stat-card">
                    <span class="stat-number">100%</span>
                    <div class="stat-label">Serverless Fargate</div>
                </div>
            </div>
            
            <div class="contact-section">
                <h2 class="contact-title">Connect & Explore More</h2>
                <div class="contact-links">
                    <a href="https://renatomendoza.io" class="contact-link" target="_blank" rel="noopener noreferrer">
                        <span class="contact-icon">🌐</span>
                        <div class="contact-info">
                            <h4>Portfolio Website</h4>
                            <p>About me & contact information</p>
                        </div>
                    </a>
                    <a href="https://github.com/rnato35" class="contact-link" target="_blank" rel="noopener noreferrer">
                        <span class="contact-icon">🐙</span>
                        <div class="contact-info">
                            <h4>GitHub Repository</h4>
                            <p>Source code & more projects</p>
                        </div>
                    </a>
                    <a href="https://dev.to/rmendoza" class="contact-link" target="_blank" rel="noopener noreferrer">
                        <span class="contact-icon">📝</span>
                        <div class="contact-info">
                            <h4>Technical Blog</h4>
                            <p>DevOps insights & tutorials</p>
                        </div>
                    </a>
                </div>
                <div class="footer-note">
                    <p><strong>💡 This entire infrastructure</strong> was deployed with a single <code>terraform apply</code> command, demonstrating Infrastructure as Code best practices and one-click deployment automation.</p>
                </div>
            </div>
        </div>
    </body>
    </html>